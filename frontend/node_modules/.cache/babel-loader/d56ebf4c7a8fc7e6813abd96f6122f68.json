{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pasan\\\\Videos\\\\PersonalProject\\\\HANSALAKA_FINE_ART\\\\frontend\\\\src\\\\component\\\\admin\\\\PostTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport './PostTable.css';\nimport { GetImgPreview } from '../user/GetImgPreview';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { UserContext } from \"../user/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PostTable(probs) {\n  _s();\n\n  //console.table(probs.products)\n  //const products = probs.products;\n  const {\n    setmodel,\n    settempImg\n  } = useContext(GetImgPreview);\n  const [products, setProducts] = useState([]);\n  useEffect(() => {\n    axios.get(`http://localhost:8989/product/getfortable/-1/title`).then(res => setProducts(res.data.modelData)).catch(error => console.log(error));\n  }, []);\n\n  function setimg(img) {\n    settempImg(img);\n    setmodel(true);\n  }\n\n  function GetLikeCount(id) {\n    //const [count, setcount] = useState(\"\")\n    var count = 0;\n    axios.get(`http://localhost:8989/api/like/get_like_count/${id}`).then(res => {\n      //console.log(res.data.count);\n      count = res.data.count;\n    }).catch(error => console.log(error));\n    return count;\n  }\n\n  function deletePost(id, src, path) {\n    notify(id, src, path);\n  }\n\n  const notify = (id, src, path) => {\n    toast.error(yesno(id, src, path), {\n      position: \"top-center\",\n      autoClose: false,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n  };\n\n  const yesno = (Id, src, Path) => {\n    //console.log({Src:src})\n    function clickYes(ids, paths) {\n      axios.post(`http://localhost:8989/product/delete`, {\n        id: ids,\n        path: paths\n      }).then(data => {\n        notify2(\"Delete successfuly.\");\n      }).catch(err => {\n        console.log(err.response);\n      });\n    }\n\n    const notify2 = messege => {\n      toast.success(`${messege}`, {\n        position: \"top-right\",\n        autoClose: true,\n        hideProgressBar: false,\n        closeOnClick: false,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      });\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"yesno-ul\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"yesno-img\",\n            src: src,\n            alt: \"err img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Are you sure to delete this?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"yesno-ul \",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-success\",\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-danger\",\n            onClick: () => {\n              clickYes(Id, Path);\n            },\n            children: \"Yes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this);\n  };\n\n  const {\n    setUser\n  } = useContext(UserContext);\n\n  function onUpdate(Product) {\n    console.log(Product);\n    setUser(Product); // window.location.replace(\"/AdminPanel/updatepost\")\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-success table-striped cu-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"#\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"views\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Likes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Size\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"col\",\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: products.map((product, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            scope: \"row\",\n            children: index + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"table-img\",\n              alt: \"\",\n              src: `http://localhost:8989/api/${product.productImage}`,\n              onClick: () => {\n                setimg(`http://localhost:8989/api/${product.productImage}`);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"td-title\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product.likes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: GetLikeCount(product._id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product.size\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-icon-div\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/AdminPanel/updatepost\",\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-edit\",\n                  type: \"update\",\n                  onClick: () => {\n                    onUpdate(product);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-trash-alt\",\n                type: \"delete\",\n                alt: \"Delete\",\n                onClick: () => {\n                  deletePost(product._id, `http://localhost:8989/api/${product.productImage}`, product.productImage);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 53\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 33\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PostTable, \"igi/P+KzQmhxb/xvKRkz/N9OQIo=\");\n\n_c = PostTable;\nexport default PostTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostTable\");","map":{"version":3,"sources":["C:/Users/pasan/Videos/PersonalProject/HANSALAKA_FINE_ART/frontend/src/component/admin/PostTable.js"],"names":["React","useContext","useState","useEffect","GetImgPreview","axios","Link","toast","UserContext","PostTable","probs","setmodel","settempImg","products","setProducts","get","then","res","data","modelData","catch","error","console","log","setimg","img","GetLikeCount","id","count","deletePost","src","path","notify","yesno","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","Id","Path","clickYes","ids","paths","post","notify2","err","response","messege","success","setUser","onUpdate","Product","map","product","index","productImage","title","likes","_id","category","size"],"mappings":"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","sourcesContent":["import React,{useContext,useState,useEffect} from 'react'\r\nimport './PostTable.css'\r\nimport {GetImgPreview} from '../user/GetImgPreview';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport {  toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport {UserContext} from \"../user/UserContext\";\r\n\r\n\r\nfunction PostTable(probs) {\r\n    //console.table(probs.products)\r\n    //const products = probs.products;\r\n    const {setmodel,settempImg} = useContext(GetImgPreview);\r\n    \r\n    const[products, setProducts] =useState([]);\r\n    useEffect(() => {\r\n        axios.get(`http://localhost:8989/product/getfortable/-1/title`)\r\n        .then(res => setProducts(res.data.modelData))\r\n        .catch(error => console.log(error));\r\n    },[]);\r\n\r\n    \r\n    function setimg(img){\r\n        settempImg(img);\r\n        setmodel(true);\r\n    }\r\n    function GetLikeCount(id){\r\n        \r\n        //const [count, setcount] = useState(\"\")\r\n        var count = 0\r\n        axios.get(`http://localhost:8989/api/like/get_like_count/${id}`)\r\n        .then((res)=>{\r\n            //console.log(res.data.count);\r\n            count = res.data.count \r\n            \r\n        } )\r\n        .catch(error => console.log(error));\r\n        return(count);\r\n    }\r\n    function deletePost(id,src,path){\r\n        notify(id,src,path)\r\n    }\r\n\r\n    const notify = (id,src,path) => {\r\n        toast.error(yesno(id,src,path),{\r\n            position: \"top-center\",\r\n            autoClose: false,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n        \r\n        })\r\n    };\r\n    const yesno =(Id,src,Path)=>{\r\n        //console.log({Src:src})\r\n        function clickYes(ids,paths){\r\n            \r\n            \r\n            axios.post(`http://localhost:8989/product/delete`,{id:ids,path:paths})\r\n            .then((data)=>{\r\n                notify2(\"Delete successfuly.\")\r\n            }).catch((err)=>{\r\n                console.log(err.response)\r\n            })\r\n\r\n        }\r\n        const notify2 = (messege) => {\r\n            toast.success(`${messege}`,{\r\n                position: \"top-right\",\r\n                autoClose: true,\r\n                hideProgressBar: false,\r\n                closeOnClick: false,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n            \r\n            })\r\n    };\r\n\r\n\r\n\r\n        return(\r\n            <div>\r\n                <ul className='yesno-ul'>\r\n                    <li>\r\n                        <img className='yesno-img' src={src} alt='err img'/>\r\n                    </li>\r\n                    <li>\r\n                        <p>Are you sure to delete this?</p>\r\n                    </li>\r\n                </ul>\r\n                <ul className='yesno-ul '>\r\n                    <li>\r\n                        <button type=\"button\" className=\"btn btn-success\">No</button>\r\n                    </li>\r\n                    <li>\r\n                        {/* <Link to=\"/postmanagement\"> */}\r\n                        <button type=\"button\" className=\"btn btn-danger\" onClick={()=>{\r\n                            clickYes(Id,Path) \r\n                        }}>Yes</button>\r\n\r\n                        {/* </Link> */}\r\n                        \r\n                    </li>\r\n                </ul>\r\n                \r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const { setUser } = useContext(UserContext);\r\n    function onUpdate(Product){\r\n        console.log(Product)\r\n        setUser(Product)\r\n        // window.location.replace(\"/AdminPanel/updatepost\")\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n            <table className=\"table table-success table-striped cu-table\">\r\n                    <thead>\r\n                        <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">image</th>\r\n                        <th scope=\"col\">Title</th>\r\n                        <th scope=\"col\">views</th>\r\n                        <th scope=\"col\">Likes</th>\r\n                        <th scope=\"col\">Category</th>\r\n                        <th scope=\"col\">Size</th>\r\n                        <th scope=\"col\">Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            products.map((product,index)=>(\r\n\r\n                                <tr>\r\n                                    <th scope=\"row\">{index+1}</th>\r\n                                        <td>\r\n                                            {\r\n                                                <img className='table-img' alt='' src={`http://localhost:8989/api/${product.productImage}`} onClick={()=>{\r\n                                                    setimg(`http://localhost:8989/api/${product.productImage}`)\r\n                                                }}/>\r\n\r\n                                            }\r\n                                        </td>\r\n                                        <td className='td-title'>\r\n                                            <p>{product.title}</p>\r\n                                        </td>\r\n                                        <td>\r\n                                            <p>{product.likes}</p>\r\n                                            \r\n                                        </td>\r\n                                        <td>\r\n                                            <p>{GetLikeCount(product._id)}</p>\r\n                                            \r\n                                        </td>\r\n                                        <td>\r\n                                            <p>{product.category}</p>\r\n                                            \r\n                                        </td>\r\n                                        <td>\r\n                                            <p>{product.size}</p>\r\n                                            \r\n                                        </td>\r\n                                        <td>\r\n                                            {\r\n                                                <div className='table-icon-div' >\r\n                                                    <Link to=\"/AdminPanel/updatepost\">\r\n                                                        <i className=\"fas fa-edit\" type='update' onClick={()=>{\r\n                                                            onUpdate(product);\r\n                                                        }}></i>\r\n                                                    </Link>\r\n                                                    \r\n                                                    <i className=\"fas fa-trash-alt\" type='delete' alt=\"Delete\" onClick={()=>{\r\n                                                        deletePost(product._id,`http://localhost:8989/api/${product.productImage}`,product.productImage)\r\n                                                    }}></i>\r\n\r\n                                                </div>\r\n\r\n                                            }\r\n                                            \r\n                                        </td>\r\n                                </tr>\r\n                            ))\r\n                        }\r\n                        \r\n                    </tbody>\r\n                </table>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostTable\r\n"]},"metadata":{},"sourceType":"module"}